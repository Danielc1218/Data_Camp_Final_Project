---
title: "Population"
author: "Daniel Chen"
date: "6/17/2021"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
library(scales)
library(officer)
library(gcookbook)
```

```{r}
x <- read_csv("Population.csv", col_types = cols(value = col_character()))
y <- read_csv("Capital.csv", col_types = cols(value = col_character()))
z <- read_csv("Incidents.csv", col_types = cols(value = col_character()))
v <- read_csv("State.csv", col_types = cols(value = col_character()))
w <- read_csv("Population_2010.csv", col_types = cols(value = col_character()))
u <- read_csv("Incidents_2010.csv", col_types = cols(value = col_character()))
t <- bind_cols(y, x) %>% 
  rename(State = value...1, Population_2019 = value...2) %>% 
  arrange(y, by_group = FALSE)

e <- bind_cols(v, z) %>% 
  rename(State = value...1, Crime_rate_2019 = value...2) %>% 
  arrange(v, by_group = FALSE)

c <- bind_cols(t, e) %>% 
  mutate(State = State...1, State...3) %>% 
  select(-State...1, -State...3)
  
a <- bind_cols(y, w) %>% 
   rename(State = value...1, Population_2010 = value...2) %>% 
  arrange(y, by_group = FALSE)

b <- bind_cols(v, u) %>% 
   rename(State = value...1, Crime_rate_2010 = value...2) %>% 
  arrange(y, by_group = FALSE) 

d <- bind_cols(a, b) %>% 
  mutate(State = State...1) %>% 
  select(-State...1, -State...3)

final_data <- left_join(c, d) %>% 
  mutate(Population_2010 = parse_number(Population_2010)) %>% 
  mutate(Population_2019 = parse_number(Population_2019)) %>% 
  mutate(Population_2010 = Population_2010/1000000) %>% 
  mutate(population_2019 = Population_2019/1000000)

ggplot(data = final_data, mapping = aes(x = State, y = Population_2010))+
  theme(axis.text.x = element_text(angle = 60, hjust = 1))+
  geom_col()


```

